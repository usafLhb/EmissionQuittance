<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
	<!-- ==============================================================
		TABLE HAB_UTILISATEUR
	=============================================================== -->
	<class name="com.rmawatanya.convergence.utile.habilitations.Utilisateur" table="HAB_UTILISATEUR">
		<id name="id" type="long" column="ID">
			<generator class="sequence" >
				<param name="sequence">HAB_USER_id_seq</param>
			</generator>
		</id>
		<property  name="blocked" column="BLOQUE" type="boolean"/>
		<property  name="changementMotdePassealaConnexion" column="CHANGMOTDEPASSEALACONNEXION" type="boolean"/>
		<property  name="dateDebutAcces" column="DATEDEBUTACCES" type="calendar" />
		<property  name="dateFinAcces" column="DATEFINACCES" type="calendar" />
		<property  name="email" column="EMAIL" type="string"/>
		<property  name="login" column="LOGIN" type="string"/>
		<property  name="nom" column="NOM" type="string"/>
		<property  name="prenom" column="PRENOM" type="string"/>
		<property  name="superUtilisateur" column="SUPERUTILISATEUR" type="boolean"/>
		<property  name="telephone" column="TELEPHONE" type="string"/>	
		<property  name="typeUtilisateur" column="TYPEUTILISATEUR" type="string"/>		
		<property  name="matricule" column="MATRICULE" type="string"/>
		<property  name="multiSociete" column="MULTISOCIETE" type="boolean"/>
		<property  name="modePack" column="MODEPACK" type="boolean"/>
		<property  name="autoriseTouteAgence" column="autoriseTouteAgence" type="boolean"/>
		
		<many-to-one lazy="false" name="refEntiteAppartenance" column="IDENTITE" class="com.rmawatanya.convergence.utile.organisation.Entite">		
		</many-to-one>
		<many-to-one lazy="false" name="refProfil" column="IDPROFIL" class="com.rmawatanya.convergence.utile.habilitations.Profil">			
		</many-to-one>
		<many-to-one name="responsable" column="IDRESPONSABLE" class="com.rmawatanya.convergence.utile.habilitations.Utilisateur">			
		</many-to-one>		
		
		<bag name="refMotsdePasse"  inverse="true">
      		<key column="IDUTILISATEUR" />
      		<one-to-many class="com.rmawatanya.convergence.utile.habilitations.MotdePasse"/>
		</bag>		
		<bag name="refConnexions" inverse="true">
      		<key column="IDUTILISATEUR" />
      		<one-to-many class="com.rmawatanya.convergence.utile.habilitations.Connexion"/>
		</bag>
		<bag name="refEntites" inverse="true" table="HAB_ASSOC_UTILISATEUR_ENTITE">
      		<key column="IDUTILISATEUR"/>
      		<many-to-many class="com.rmawatanya.convergence.utile.organisation.Entite" column="IDENTITE"/>
		</bag>								
	</class>
	<!-- ==============================================================
		TABLE HAB_MOTDEPASSE
	=============================================================== -->
	<class name="com.rmawatanya.convergence.utile.habilitations.MotdePasse" table="HAB_MOTDEPASSE">
		<id name="id" type="long" column="ID">
			<generator class="sequence" >
				<param name="sequence">HAB_MOTDEPASSE_id_seq</param>
			</generator>
		</id>
		<property  name="courant" column="COURANT" type="boolean"/>
		<property  name="dateCreation" column="DATECREATION" type="calendar" />
		<property  name="realMotdePasse" column="REALMOTDEPASSE" type="string"/>
		<property  name="motdePasse" column="MOTDEPASSE" type="string"/>		
		
		<many-to-one name="refUtilisateur" column="IDUTILISATEUR" class="com.rmawatanya.convergence.utile.habilitations.Utilisateur">			
		</many-to-one>
	</class>	
	<!-- ==============================================================
		TABLE HAB_CONNEXION
	=============================================================== -->
	<class name="com.rmawatanya.convergence.utile.habilitations.Connexion" table="HAB_CONNEXION">
		<id name="id" type="long" column="ID">
			<generator class="sequence" >
				<param name="sequence">hab_connexion_id_seq</param>
			</generator>
		</id>
		<property  name="commentaire" column="COMMENTAIRE" type="string"/>
		<property  name="dateConnexion" column="DATECONNEXION" type="calendar" />
		<property  name="dateDeconnexion" column="DATEDECONNEXION" type="calendar" />
		<property  name="statut" column="STATUT" type="boolean"/>
		<property  name="sessionId" column="IDSESSION" type="string"/>
		
		<many-to-one name="refUtilisateur" column="IDUTILISATEUR" class="com.rmawatanya.convergence.utile.habilitations.Utilisateur">			
		</many-to-one>
	</class>
	<!-- ==============================================================
		TABLE REF_FONCTIONNALITE
	=============================================================== -->
	<class name="com.rmawatanya.convergence.utile.referentiel.Fonctionnalite" table="REF_FONCTIONNALITE">
		<id name="id" type="long" column="ID"><generator class="increment" /></id>
		<property  name="code" column="CODE" type="integer"/>
		<property  name="libelle" column="LIBELLE" type="string"/>
		<property  name="type" column="TYPEFONCTIONNALITE" type="string"/>
		<property  name="titre" column="TITRE" type="string"/>
		<property  name="valableToutProduit" column="VALABLETOUTPRODUIT" type="boolean"/>
		<property  name="actionClassName" column="ACTIONCLASSNAME" type="string"/>
		<property  name="isSecure" column="ISSECURE" type="boolean"/>		
	</class>
	<!-- ==============================================================
		TABLE HAB_PROFIL
	=============================================================== -->
	<class name="com.rmawatanya.convergence.utile.habilitations.Profil" table="HAB_PROFIL">
		<id name="id" type="long" column="ID"><generator class="increment" /></id>
		<property  name="code" column="CODE" type="integer"/>
		<property  name="dateEffet" column="DATEEFFET" type="calendar" />
		<property  name="dateFin" column="DATEFIN" type="calendar" />
		<property  name="libelleRole" column="LIBELLE" type="string"/>
		<property  name="profilStandard" column="PROFILSTANDARD" type="boolean"/>
		
		<bag lazy="false" name="actions" table="HAB_ASSOC_PROFIL_FONCTIONNALIT">
      		<key column="IDPROFIL"/>
      		<many-to-many class="com.rmawatanya.convergence.utile.referentiel.Fonctionnalite" column="IDFONCTIONNALITE"/>
		</bag>
		<bag name="refPorteFeuilleVersionCommercialeProduit" table="PRD_ASSOC_PROFIL_PORTEFEUILLE">
      		<key column="IDPROFIL"/>
      		<many-to-many class="com.rmawatanya.convergence.application.prd.metier.modele.PorteFeuilleVersionCommercialeProduit" column="IDPORTEFEUILLE"/>
		</bag>									
	</class>	
		
	<!-- ==============================================================
		TABLE HAB_GEST_HABILITE
	=============================================================== -->
	<class name="com.rmawatanya.convergence.utile.habilitations.GestionnaireHabilite" table="HAB_GEST_HABILITE">
		<id name="id" type="long" column="ID">
			<generator class="sequence" >
				<param name="sequence">HAB_GEST_HABILITE_SEQ</param>
			</generator>
		</id>			
		<many-to-one name="refUtilisateur" column="IDUTILISATEUR" class="com.rmawatanya.convergence.utile.habilitations.Utilisateur" />
		<many-to-one name="refGestionnaire" column="IDGESTIONNAIRE" class="com.rmawatanya.convergence.utile.habilitations.Utilisateur" />												
	</class>
	
	<!-- ==============================================================
		TABLE HAB_DETAILORDONNANCEMENT
	=============================================================== -->
	<class name="com.rmawatanya.convergence.utile.habilitations.DetailOrdonnancement" table="HAB_DETAILORDONNANCEMENT">
		<id name="id" type="long" column="ID">
			<generator class="sequence" >
				<param name="sequence">HAB_DET_ORDONNANCEMENT_ID_SEQ</param>
			</generator>
		</id>
		<property  name="ordreOrdonnancement" column="ORDRE_ORDONNANCEMENT" type="integer"/>
		<property  name="ordreSeuilAcceptation" column="ORDRE_SEUILACCEPTATION" type="integer"/>						
		<many-to-one name="refGestionnaire" column="IDGESTIONNAIRE" class="com.rmawatanya.convergence.utile.habilitations.Utilisateur" />
		<many-to-one name="refOrdonnancement" column="IDORDONNANCEMENT" class="com.rmawatanya.convergence.utile.habilitations.Ordonnancement" />					
	</class>
	
	<!-- ==============================================================
		TABLE HAB_ORDONNANCEMENT
	=============================================================== -->
	<class name="com.rmawatanya.convergence.utile.habilitations.Ordonnancement" table="HAB_ORDONNANCEMENT">
		<id name="id" type="long" column="ID">
			<generator class="sequence" >
				<param name="sequence">HAB_ORDONNANCEMENT_ID_SEQ</param>
			</generator>
		</id>
		<property  name="code" column="CODE" type="string"/>
		<property  name="libelle" column="libelle" type="string"/>
		<property  name="montantOrdonnancement" column="MONTANT_ORDONNANCEMENT" type="double"/>
		<property  name="montantSeuilAcceptation" column="MONTANT_SEUILACCEPTATION" type="double"/>				
		<many-to-one name="refTypePrestation" column="IDTYPEPRESTATION" class="com.rmawatanya.convergence.utile.referentiel.TypePrestation" />		
		<bag name="refsDetailsOrdonnancement"  inverse="true" cascade="all-delete-orphan">
      		<key column="IDORDONNANCEMENT" />
      		<one-to-many class="com.rmawatanya.convergence.utile.habilitations.DetailOrdonnancement"/>
		</bag>				
	</class>
	
</hibernate-mapping>